<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>EasyTrain :: Booking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/styles-timetable.css}">
</head>
<body>

<div class="container">
    <!-- Header -->
    <div th:replace="~{fragments/header-logo-only :: header-logo-only}">
    </div>

    <!-- Navigation -->
    <div th:replace="~{fragments/navigation :: navigation}">
    </div>

    <main class="main-background d-flex flex-column align-items-center justify-content-center">

        <h1 class="main-title-blue text-center">Booking</h1>

        <!-- Content Container for the date -->
        <div class="content-container">
            <div class="date-container">
                <p class="text-secondary" th:text="${#dates.format(#dates.createNow(), 'MMMM dd, yyyy')}"></p>
                <!-- Shows today's date -->
            </div>
        </div>

        <form th:action="@{/processBooking/{trainNumber}/{price}(trainNumber=${booking.booking.trainNumber},
                                         price=${booking.booking.journeyPrice})}" th:object="${booking}" method="post" >
            <!-- Content Container for the route -->
            <div class="route-container">
                <span class="route-text" th:text="*{booking.fromLocation}"></span>
                <!-- Exchange Hamburg with Thymeleaf Expression (th:text="${station})-->
            </div>

            <!-- Content Container for the Timetable Entries -->

            <div class="timetable-entry-container">


                <a href="#" th:href="@{/register}" class="booking-link">
                    <div class="entry-section logo-section">
                        <img th:src="@{/images/EasyTrain_Logo_NoText.png}" alt="EasyTrain Logo" class="train-logo"/>
                        <p class="train-number"><span th:text="*{booking.trainNumber}"></span></p>
                        <p class="booking-text">Pay Later</p>
                    </div>
                </a>
                <!--            </form>-->
                <div class="entry-separator"></div>
                <div class="entry-section">
                    <p class="label">From</p>
                    <p class="place" th:text="*{booking.fromLocation}"></p>
                    <p class="label">Arrival in <span th:text="*{booking.fromLocation}"></span></p>
                    <p class="time" th:text="*{booking.arrivalTime}"></p>
                </div>
                <div class="entry-section arrow-section">
                    <img th:src="@{/images/double_arrow_shadow.png}" alt="Arrow" class="arrow"/>
                </div>
                <div class="entry-section">
                    <p class="label">To</p>
                    <p class="place" th:text="*{booking.toLocation}"></p>
                    <p class="label">Departure from <span th:text="*{booking.fromLocation}"></span></p>
                    <p class="time" th:text="*{booking.departureTime}"></p>
                </div>
                <div class="entry-separator"></div>
                <div class="entry-section">
                    <p class="label">Platform</p>
                    <p class="platform-number" th:text="*{booking.platformNumber}"></p>
                </div>
                <div class="entry-separator"></div>
                <div class="entry-section delay-section">
                    <p class="label">Price</p>
                    <p class="delay-time" th:text="*{booking.journeyPrice + ' Euros'}"></p>
                    <p class="label">Destination</p>
                    <div class="delayed-times">
                        <p class="delayed-time" th:text="*{booking.trainsDestination}"></p>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <label class="form-label" for="fullName">
                    Full Name
                </label>
                <input class="form-control" id="fullName" th:field="${booking.ticket.fullName}" placeholder="Full Name*"/>
            </div>
            <div class="col-md-6">
                <label class="form-label" for="email">
                    Full Name
                </label>
                <input class="form-control" id="email" th:field="${booking.ticket.email}" placeholder="Email address*"/>
            </div>

            <div class="col-md-6">
                <label class="form-label">Gender</label>
                <select class="form-select" th:field="${booking.ticket.gender}">
                    <option value="" selected>Select your gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Divers">Others</option>
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">
                    Class
                </label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="first" name="first" value="1"
                           th:field="${booking.ticket.carriageClass}">First</input>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="second" name="second" value="2"
                           th:field="${booking.ticket.carriageClass}">Second</input>
                </div>
            </div>

            <div class="form-check mb-3">
                <label class="p-2">
                    <input class="form-check-input" type="checkbox" name="underage" th:field="${booking.ticket.underAge}"> Underage
                </label>
            </div>

            <hr>

            <h2>Payment Information</h2>

            <div class="col-md-6">
                <label class="form-label" for="fullName">
                    Full Name
                </label>
                <input class="form-control" id="cardHolder" th:field="${booking.payment.cardHolder}" placeholder="Card Holder*"/>
                <span th:if="${#fields.hasErrors('${booking.payment.cardHolder}')}" th:errors="${booking.payment.cardHolder}" class="error"></span>
            </div>

            <div class="col-md-6">
                <label class="form-label" for="cardNumber">
                    Full Name
                </label>
                <input class="form-control" id="cardNumber" th:field="${booking.payment.cardNumber}" placeholder="Card Number*"/>
                <span th:if="${#fields.hasErrors('${booking.payment.cardNumber}')}" th:errors="${booking.payment.cardNumber}" class="error"></span>
            </div>

            <div class="col-md-6">
                <label class="form-label" for="cvc">
                    Full Name
                </label>
                <input class="form-control" id="cvc" th:field="${booking.payment.cvc}" placeholder="CVC*"/>
                <span th:if="${#fields.hasErrors('${booking.payment.cvc}')}" th:errors="${booking.payment.cvc}" class="error"></span>
            </div>

            <div class="col-md-6">
                <label class="form-label" for="expiryDate">
                    Full Name
                </label>
                <input class="form-control" id="expiryDate" th:field="${booking.payment.expiryDate}" placeholder="Expiry Date*"/>
                <span th:if="${#fields.hasErrors('${booking.payment.expiryDate}')}" th:errors="${booking.payment.expiryDate}" class="error"></span>
            </div>

            <div class="btn-container">
                <button type="submit" class="btn btn-custom">Buy Ticket</button>
            </div>

        </form>
    </main>
    <!-- Footer -->
    <div th:replace="~{fragments/footer :: footer}">
    </div>
</div>


</body>
</html>